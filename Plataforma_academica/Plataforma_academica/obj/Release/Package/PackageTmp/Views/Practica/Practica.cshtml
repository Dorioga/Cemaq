@model Plataforma_academica.Models.Practicas

@{
    ViewBag.Title = "Practica";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <link href="~/Estilos/practica_textaarea.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/actividadesStyl1.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/visualizar_practica.css" rel="stylesheet" type="text/css">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @Scripts.Render("~/Scripts/modal_inicial_mensaje.js")
</head>

@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()

   <body>
       <div class="modal fade" id="mostrarmoda" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
           <div class="modal-dialog" style="position: initial;">
               <div class="modal-content">
                   <div class="modal-header">
                       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                       <h3 style="position: absolute;">Información</h3>
                   </div>
                   <div class="modal-body">
                       Se le recuerda al estudiante que podra repetir el examen las veces que desee, pero se mantendra la nota del primer intento
                   </div>                   
               </div>
           </div>
       </div> 
       @{
           Plataforma_academica.Models.Login usu = Session["usuario"] as Plataforma_academica.Models.Login;
           Plataforma_academica.Models.Practicas practica = new Plataforma_academica.Models.Practicas();
           Plataforma_academica.Models.Practicas[] arreglo;
           Plataforma_academica.Models.Practicas[] arreglo2;
           Plataforma_academica.Models.Practicas[] arreglo3;
           int rol = Convert.ToInt32(usu.rol);
           if (usu != null)
           {
               if (rol > 3 && rol < 7)
               {
               Plataforma_academica.Models.principalP act2 = Session["usuarios2"] as Plataforma_academica.Models.principalP;
               arreglo3 = practica.Consultar_examen_practica(act2.codigo_examen);
               <h2>@Html.LabelFor(Model => arreglo3[0].nombre_examen, arreglo3[0].nombre_examen, new { @class = "" })</h2>//titulo actividad
                <p>@Html.LabelFor(Model => arreglo3[0].descripcion_examen, arreglo3[0].descripcion_examen, new { @class = "form-control", @id = "p" })</p>

                           //descripcion actividad
                           arreglo = practica.Consultar_contenido_practica(act2.codigo_examen);                           
                           if (arreglo[0].nombre_pregunta == null)
                           {
                           }
                           else
                           {
                               for (int i = 0; i < arreglo.Length; i++)
                               {
                                   arreglo2 = practica.Consultar_respuestas_practica(act2.codigo_examen, arreglo[i].id_pregunta);
                                   if (arreglo[i].id_tipo_multimedia == 3)
                                   {
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                       }
                       if (arreglo[i].id_tipo_multimedia == 1)
                       {
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="container mt-4">
                                <div class="row">
                                    <div class="col-md-12 mb-4">
                                        <div class="card">
                                            <div class="card-block p-3">
                                                <div class="embed-responsive embed-responsive-16by9">
                                                    <iframe width="560" height="315" src="@arreglo[i].multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section> 
                         <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" id="radio_@j" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>                       
                       }
                       if (arreglo[i].id_tipo_multimedia == 2)
                       {
                                               <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="container mt-4">
                                <div class="row">
                                    <div class="col-md-12 mb-4">
                                        <div class="card">
                                            <div class="card-block p-3">
                                                <div>
                                                    <img src="~/imagen_multimedia/@arreglo[i].multimedia" alt="Nature">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                         <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                       }
                       if (arreglo[i].id_tipo_multimedia == 4)
                       {
                                               <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <audio controls>
                                        <source src="~/imagen_multimedia/@arreglo[i].multimedia" type="audio/mp3" />
                                    </audio>
                                </div>
                            </div>
                        </section>
                         <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                       }
                   }                   
               }     
        <section>
            <div class="card">
                <div class="card-block p-3">
                    <article>
                        <button type="submit" id="subir1" name="calcular" value="@arreglo.Length" class="btn btn-primary">Calificar</button>                     
                    </article>
                </div>
            </div>
        </section> 
        if (ViewBag.mensaje1 == "Perdio")
               {
                @Scripts.Render("~/Scripts/buton_examen.js")
                @Scripts.Render("~/Scripts/Emergente_nota1.js")
                
           }
           else
           {
            if (ViewBag.mensaje1 == "aprobo")
            {
              @Scripts.Render("~/Scripts/buton_examen.js")
              @Scripts.Render("~/Scripts/Emergente_nota1.js")
              
            }
           }
           <div class="modal fade" id="mostrarmodal4" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog" style="position: initial;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 style="position: absolute;">Resultado del examen</h3>
                        </div>
                        <div class="modal-body">
                            <h4>@ViewBag.mensaje2</h4>
                        </div>
                        <div class="modal-footer">
                            <h4>@ViewBag.mensaje3</h4>
                            <a href="/PrincipalPlataforma/principalplataforma" class="btn btn-info">Finalizar</a>
                        </div>
                    </div>
                </div>
            </div>         
        }
       else
               {
                   if (rol < 4 || rol >= 7)
                   {
                    Plataforma_academica.Models.principalP act2 = Session["usuarios10"] as Plataforma_academica.Models.principalP;
               arreglo3 = practica.Consultar_examen_practica(act2.codigo_examen);
               <h2>@Html.LabelFor(Model => arreglo3[0].nombre_examen, arreglo3[0].nombre_examen, new { @class = "" })</h2>//titulo actividad
                <p>@Html.LabelFor(Model => arreglo3[0].descripcion_examen, arreglo3[0].descripcion_examen, new { @class = "form-control", @id = "p" })</p>

               //descripcion actividad
               arreglo = practica.Consultar_contenido_practica(act2.codigo_examen);
               if (arreglo[0].nombre_pregunta == null)
               {
               }
               else
               {
                   for (int i = 0; i < arreglo.Length; i++)
                   {
                       arreglo2 = practica.Consultar_respuestas_practica(act2.codigo_examen, arreglo[i].id_pregunta);
                       if (arreglo[i].id_tipo_multimedia == 3)
                       {
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                       }
                       if (arreglo[i].id_tipo_multimedia == 1)
                       {
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="container mt-4">
                                <div class="row">
                                    <div class="col-md-12 mb-4">
                                        <div class="card">
                                            <div class="card-block p-3">
                                                <div class="embed-responsive embed-responsive-16by9">
                                                    <iframe width="560" height="315" src="@arreglo[i].multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section> 
                         <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" id="radio_@j" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>                       
                       }
                       if (arreglo[i].id_tipo_multimedia == 2)
                       {
                                               <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="container mt-4">
                                <div class="row">
                                    <div class="col-md-12 mb-4">
                                        <div class="card">
                                            <div class="card-block p-3">
                                                <div>
                                                    <img src="~/imagen_multimedia/@arreglo[i].multimedia" alt="Nature">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                         <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                       }
                       if (arreglo[i].id_tipo_multimedia == 4)
                       {
                                               <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "form-control", @disabled = "true" })                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <audio controls>
                                        <source src="~/imagen_multimedia/@arreglo[i].multimedia" type="audio/mp3" />
                                    </audio>
                                </div>
                            </div>
                        </section>
                         <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                       @{
                                           for (int j = 0; j < arreglo2.Length; j++)
                                           {                                                
                                                <div class="radio">
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                </div> 
                                           }
                                    }                                         
                                    </article>
                                </div>
                            </div>
                        </section>
                       }
                   }                   
               }     
        <section>
            <div class="card">
                <div class="card-block p-3">
                    <article>
                        <button type="submit" id="subir1" name="calcular" value="@arreglo.Length" class="btn btn-primary">Calificar</button>                     
                    </article>
                </div>
            </div>
        </section> 
           }
           if (ViewBag.mensaje1 == "Perdio")
               {
                @Scripts.Render("~/Scripts/buton_examen.js")
                @Scripts.Render("~/Scripts/Emergente_nota.js")
                
           }
           else
           {
            if (ViewBag.mensaje1 == "aprobo")
            {
              @Scripts.Render("~/Scripts/buton_examen.js")
              @Scripts.Render("~/Scripts/Emergente_nota.js")
              
            }
           }
           <div class="modal fade" id="mostrarmodal3" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog" style="position: initial;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 style="position: absolute;">Resultado del examen</h3>
                        </div>
                        <div class="modal-body">
                            <h4>@ViewBag.mensaje2</h4>
                        </div>
                        <div class="modal-footer">
                            <h4>@ViewBag.mensaje3</h4>
                            <a href="/Seleccionar_para_subir_contenido/seleccionar_unidad_para_contenido" class="btn btn-info">Finalizar</a>
                        </div>
                    </div>
                </div>
            </div>  
                   }
               }


                
    }
</body>
}



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
