@model Plataforma_academica.Models.principalP

@{
    ViewBag.Title = "seleccionar_unidad_para_contenido";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Plataforma_academica.Models.Login usu = Session["usuario"] as Plataforma_academica.Models.Login;
}
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
        @section scripts{
            <script src="/Scripts/ui/jquery.ui.core.js"></script>
            <script src="/Scripts/ui/jquery.ui.widget.js"></script>
            <script src="/Scripts/ui/jquery.ui.draggable.js"></script>
            <script src="/Scripts/ui/jquery.ui.resizable.js"></script>

            <!--Reference the SignalR library. -->
            <script src="~/Scripts/jquery.signalR-2.4.1.js"></script>

            <!--Reference the autogenerated SignalR hub script. -->
            <script src="/signalr/hubs"></script>
        }

    </head>



@using (Html.BeginForm("seleccionar_unidad_para_contenido","Seleccionar_para_subir_contenido", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    Plataforma_academica.Models.principalP principal = new Plataforma_academica.Models.principalP();
    //Plataforma_academica.Models.principalP[] arreglo;
    Plataforma_academica.Models.Niveles nivel = new Plataforma_academica.Models.Niveles();
    //Plataforma_academica.Models.Niveles[] arreglo_nivel;
    Plataforma_academica.Models.Unidades unidad = new Plataforma_academica.Models.Unidades();
    //Plataforma_academica.Models.Unidades[] arreglo_unidad;
    Plataforma_academica.Models.Actividades_unidad actividad = new Plataforma_academica.Models.Actividades_unidad();
    Plataforma_academica.Models.Actividades_unidad[] arreglo_actividad;
    Plataforma_academica.Models.Actividades_unidad[] arreglo_examen;
    Plataforma_academica.Models.Pais pai = new Plataforma_academica.Models.Pais();
    //Plataforma_academica.Models.Pais[] arreglo_pais;
    Plataforma_academica.Models.Departamento dep = new Plataforma_academica.Models.Departamento();
    //Plataforma_academica.Models.Departamento[] arreglo_departamento;
    Plataforma_academica.Models.Municipio mun = new Plataforma_academica.Models.Municipio();
    //Plataforma_academica.Models.Municipio[] arreglo_municipio;
    Plataforma_academica.Models.Empresa emp = new Plataforma_academica.Models.Empresa();
    //Plataforma_academica.Models.Empresa[] arreglo_empresa;
    Plataforma_academica.Models.Grupo grup = new Plataforma_academica.Models.Grupo();
    //Plataforma_academica.Models.Grupo[] arreglo_grupo;
    Plataforma_academica.Models.Alumnos alum = new Plataforma_academica.Models.Alumnos();
    //Plataforma_academica.Models.Alumnos[] arreglo_alumnos;
    Plataforma_academica.Models.Chat cha = new Plataforma_academica.Models.Chat();
    //Plataforma_academica.Models.Chat[] arreglo_chat;
    //string nc1;


    <main class="con_form">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
       <!-- Diplomados-->
        @*<div class="contenercheck first" id="bdiplomado">
            <span>
                <p>Diplomados</p>
            </span>
        </div>
        <div class="contener" id="diplomado">
            @{
                if (usu != null)
                {

                    if (Convert.ToInt32(usu.rol) == 7)
                    {
                        arreglo = principal.BuscarCursosDocentes(usu.cedula);
                    }
                    else
                    {
                        arreglo = principal.BuscarCursosgeneral();
                    }
                    for (int i = 0; i < arreglo.Length; i++)
                    {
                        <button type="submit" class="boton" name="ir" value="@arreglo[i].codigo_curso">
                            <div class="content-btn">
                                <img src="~/imagenes/@arreglo[i].url" />
                                <p>@arreglo[i].nombre_curso</p>
                            </div>
                        </button>
                    }
                    
                }
            }
        </div>*@
     
        <!--Modulos-->
        @*<div class="contenercheck" id="bmodulo">
            <span>
                <p>Modulos</p>
            </span>
        </div>
        <div class="contener" id="modulo">
            @{
                if (TempData["mensaje10"] != null && usu != null)
                {
                    TempData.Keep("mensaje10");
                    nc = Convert.ToString(TempData["mensaje10"]);
                    arreglo_unidad = unidad.Consultar_unidades_grupo(nc);

                    for (int i = 0; i < arreglo_unidad.Length; i++)
                    {
                        <button type="submit" class="boton" name="ir3" value="@arreglo_unidad[i].codigo_unidad">
                            <div class="content-btn">
                                <img src="~/imagen_multimedia/Modulo.png" />
                                <p>@arreglo_unidad[i].nombre_unidad</p>
                            </div>
                            <script>
                                var checkBox = document.getElementById("unidad");
                                checkBox.checked = "checked"
                            </script>
                        </button>
                    }
                }
                else
                {
                    <a>Elija un Diplomado</a>
                }
            }
        </div>*@
        <!--Actividades-->
        @{
            if (TempData["mensaje12"] != null && usu != null)
            {
                <div class="contener" id="actividad">
                    @{
                        TempData.Keep("mensaje12");
                        string nc1 = Convert.ToString(TempData["mensaje12"]);
                        arreglo_actividad = actividad.Consultar_Actividad_unidades_edic(nc1);
                        arreglo_examen = actividad.Consultar_examen_unidades_edic(nc1);
                        if (Convert.ToInt32(usu.rol) != 7)
                        {
                            <button type="button" class="boton" data-toggle="modal" data-target="#guia" name="guia">
                                <div class="content-btn">
                                    <section class="cent">
                                        <p>Cargar Guía</p>
                                    </section>
                                </div>
                            </button>
                            <button type="submit" class="boton" name="ir5" value="nueva">
                                <div class="content-btn">
                                    @*<section class="izq">
                                        <img src="~/imagen_multimedia/letra a2a.png" style="width: 3.9vw;" />
                                    </section>*@
                                    <section class="cent">
                                        <p>Crear Actividad</p>
                                    </section>
                                </div>
                            </button>
                            <button type="submit" class="boton" name="ir99" value="nueva2">
                                <div class="content-btn">
                                    @*<section class="izq">
                                        <img src="~/imagen_multimedia/LETRA Ee.png" />
                                    </section>*@
                                    <section class="cent">
                                    <p>Crear Examen</p>
                                    </section>
                                    
                                </div>
                            </button>
                        }
                        for (int i = 0; i < arreglo_actividad.Length; i++)
                        {
                            if (i==0)
                            {
                                <button type="submit" class="boton" data-toggle="modal" data-target="#guia_ver">
                                    <div class="content-btn">
                                        <section class="cent"><p>Guía de Aprendizaje</p></section>
                                    </div>
                                </button>
                            }
                            <button type="submit" class="boton" name="ir4" value="@arreglo_actividad[i].codigo_actividad">
                                <div class="content-btn">
                                    @*<section class="izq"><img src="~/Imagenes/Temporal/letra a2.png" /></section>*@
                                    <section class="cent"><p>@arreglo_actividad[i].nombre_actividad "@arreglo_actividad[i].edicion"</p></section>
                                    
                                    
                                </div>
                            </button>
                            if (arreglo_actividad[i].edicion == "Desaprobado")
                            {
                                <button type="submit" class="boton btn-editar" name="ir6" value="@arreglo_actividad[i].codigo_actividad">
                                    <div class="content-btn">
                                        <section class="cent">
                                        <p class="glyphicon glyphicon-hand-left">Editar</p>
                                        </section>
                                        
                                    </div>
                                </button>
                            }                            
                        }
                        for (int i = 0; i < arreglo_examen.Length; i++)
                        {
                            <button type="submit" class="boton" name="ir4_" value="@arreglo_examen[i].id_examen">
                                <div class="content-btn">
                                    @*<section class="izq">
                                        <img src="~/Imagenes/Temporal/LETRA E.png" style="width: 2.7vw;"/>
                                    </section>*@
                                    <section class="cent">
                                        <p>@arreglo_examen[i].examen "@arreglo_examen[i].edicion_examen"</p>
                                    </section>
                                    
                                    
                                </div>
                            </button>

                            if (arreglo_examen[i].edicion_examen == "Desaprobado")
                            {
                                <button type="submit" class="boton" name="ir6_" value="@arreglo_examen[i].id_examen">
                                    <div class="content-btn">
                                        <section class="cent"><span class="glyphicon glyphicon-hand-left">Editar</span></section>
                                    </div>
                                </button>
                            }
                        }
                        <script>
                            var checkBox = document.getElementById("actividad");
                            checkBox.checked = "checked"
                        </script>

                    }
                </div>
                <div class="modal fade" id="guia_ver" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" style='width:100%; min-height:700px;'>
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-body">
                                <embed src="https://docs.google.com/gview?url=https://diplomado-cemaq.azurewebsites.net/Imagenes/@arreglo_actividad[0].url_guia&embedded=true" style='width:100%; min-height:700px;' frameborder='0'></embed>
                            </div>
                            <div class="modal-footer">
                                <a href="" data-dismiss="modal" class="btn btn-danger">Cerrar</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="guia" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">

                                <h3>Agregar Guía</h3>
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            </div>
                            <div class="modal-body">
                                <section class="carga">
                                    <span id="estado"></span>
                                    <input class="filechooser" type="file" id="archivo" name="file" accept=".pdf" style="font-size: 12px;" />
                                    <button class="btn btn-primary btn-xs" type="submit" id="seccion" name="seccion" value="@nc1" style="font-size: 16px;">Guardar</button>/>
                                </section>
                            </div>
                            <div class="modal-footer">
                                <a href="" data-dismiss="modal" class="btn btn-danger">Cerrar</a>
                            </div>
                        </div>
                    </div>
                </div>
                        }
        }  
        
        
        @*<script>
            function myFunction() {
                var checkBox = document.getElementById("curso");
                var text = document.getElementById("Cursos");
                if (checkBox.checked == true) {
                    text.style.display = "block";
                } else {
                    text.style.display = "none";
                }
            }
            function mynivel() {
                var checkBox = document.getElementById("nivel");
                var text = document.getElementById("Niveles");
                if (checkBox.checked == true) {
                    text.style.display = "block";
                } else {
                    text.style.display = "none";
                }
            }
            function myunidad() {
                var checkBox = document.getElementById("unidad");
                var text = document.getElementById("Unidades");
                if (checkBox.checked == true) {
                    text.style.display = "block";
                } else {
                    text.style.display = "none";
                }
            }
            function myactividad() {
                var checkBox = document.getElementById("actividad");
                var text = document.getElementById("Actividades");
                if (checkBox.checked == true) {
                    text.style.display = "block";
                } else {
                    text.style.display = "none";
                }
            }
        </script>*@
        @*@{
            if (ViewBag.mensaje == "actividad")
            {
                <script> window.open ('@Url.Action("Actividades", "Actividades")'); </script>
            }
        }*@
    </main>

}<script src="~/Scripts/Manejocurso.js" charset="utf-8"></script>
 <footer>
     <p> @DateTime.Now.Year - CEMAQ - Diplomados</p>
 </footer>