@model Plataforma_academica.Models.Actividades

@{
    ViewBag.Title = "Actividades";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<head>
    <link href="~/Estilos/principal.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/actividadesStyl1.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/paginaci.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="~/Estilos/bookblock.css" />

</head>

@using (Html.BeginForm())
{
    int i = 0;
    @Html.AntiForgeryToken()

    <form id="regForm">
        <div class="bb-custom-wrapper">
            <div id="bb-bookblock" class="bb-bookblock">
                <nav>

                    <span id="bb-nav-next"> → </span>
                    <span id="bb-nav-prev"> ← </span>
                </nav>

                @{
                    Plataforma_academica.Models.Login usu = Session["usuario"] as Plataforma_academica.Models.Login;
                    Plataforma_academica.Models.principalP actividad1 = Session["usuario3"] as Plataforma_academica.Models.principalP;
                    Plataforma_academica.Models.Actividades actividad = new Plataforma_academica.Models.Actividades();
                    Plataforma_academica.Models.Actividades[] arreglo;
                    Plataforma_academica.Models.Actividades us = new Plataforma_academica.Models.Actividades();
                    int rol = Convert.ToInt32(usu.rol);
                    int seccion_actual = 0;
                    if (usu != null)
                    {
                        if (rol > 3 && rol < 7)
                        {
                            Plataforma_academica.Models.principalP act1 = Session["usuario3"] as Plataforma_academica.Models.principalP;
                            arreglo = actividad.Consultar_contenido_actividad(act1.codigo_actividad);
                            actividad.actual_seccion = actividad.Buscar_seccion_actual(actividad1.codigo_actividad, usu.usuario);
                            seccion_actual = Convert.ToInt32(actividad.actual_seccion.Rows[0]["seccion_leida"].ToString()) - 1;
                            for (i = 0; i < arreglo.Length; i++)
                            {
                                <!-- Tabs-->
                                <div class="bb-item">
                                    @{
                                        if (i == 0)
                                        {
                                            <h2>@Html.LabelFor(Model => arreglo[i].Nombre_actividad, arreglo[i].Nombre_actividad, new { @class = "" })</h2>
                                            if (arreglo[i].id_tipo_multimedia == "3")
                                            {
                                                <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                            }
                                            else
                                            {
                                                if (arreglo[i].id_tipo_multimedia == "2")
                                                {
                                                    <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                    <section>
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>
                                                }
                                                else
                                                {
                                                    <section>
                                                        <div class="embed-responsive ">
                                                            <iframe class="embed-responsive-item" src="@arreglo[i].url_multimedia"></iframe>
                                                        </div>
                                                    </section>
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (arreglo[i].id_tipo_multimedia == "3")
                                            {
                                                <section>
                                                    <article>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@

                                                        <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>

                                                    </article>
                                                </section>
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "1")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                        <div class="embed-responsive1">
                                                            <iframe width="560" height="315" src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                        </div>
                                                    </section>
                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <div class="embed-responsive">
                                                            <iframe width="560" height="315" src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                        </div>
                                                    </section>
                                                }
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "2")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>
                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>
                                                }
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "4")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                        <audio controls>
                                                            <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                        </audio>
                                                    </section>
                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <audio controls>
                                                            <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                        </audio>
                                                    </section>
                                                }
                                            }
                                        }
                                        int m = i + 1;
                                        <div>
                                            <span class="step">@m</span>
                                        </div>
                                    }

                                </div>
                            }

                        }
                        else
                        {
                            if (rol < 4 || rol >= 7)
                            {
                                Plataforma_academica.Models.principalP act2 = Session["usuario10"] as Plataforma_academica.Models.principalP;
                                arreglo = actividad.Consultar_contenido_actividad(act2.codigo_actividad);
                                for (i = 0; i < arreglo.Length; i++)
                                {
                                    <div class="bb-item">
                                        @{
                                            if (i == 0)
                                            {
                                                <h2>@Html.LabelFor(Model => arreglo[i].Nombre_actividad, arreglo[i].Nombre_actividad, new { @class = "" })</h2>
                                                if (arreglo[i].id_tipo_multimedia == "3")
                                                {
                                                    <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                }
                                                else
                                                {
                                                    if (arreglo[i].id_tipo_multimedia == "2")
                                                    {
                                                        <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                        <section>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>
                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <div class="embed-responsive ">
                                                                <iframe class="embed-responsive-item" src="@arreglo[i].url_multimedia"></iframe>
                                                            </div>
                                                        </section>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (arreglo[i].id_tipo_multimedia == "3")
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                }
                                                if (arreglo[i].id_tipo_multimedia == "1")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <div class="embed-responsive ">
                                                                <iframe src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                            </div>
                                                        </section>
                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                                <!-- Html.TextArea("autosize", arreglo[i].contenido_seccion)-->
                                                                <textarea id="autosize1">@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <div class="embed-responsive ">
                                                                <iframe src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                            </div>
                                                        </section>
                                                    }
                                                }
                                                if (arreglo[i].id_tipo_multimedia == "2")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>
                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                                <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>
                                                    }
                                                }
                                                if (arreglo[i].id_tipo_multimedia == "4")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <audio controls>
                                                                <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                            </audio>
                                                        </section>
                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                                <textarea id="autosize">@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <audio controls>
                                                                <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                            </audio>
                                                        </section>
                                                    }
                                                }
                                            }
                                            int m = i + 1;
                                            <div>
                                                <span class="step">@m</span>
                                            </div>

                                        }
                                    </div>

                                }
                            }
                        }
                    }

                }
            </div>
            <!-- Botones-->
            <!-- Circles which indicates the steps of the form: -->
        </div>
    </form>

}


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

}