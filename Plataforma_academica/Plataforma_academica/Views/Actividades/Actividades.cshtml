@model Plataforma_academica.Models.Actividades

@{
    ViewBag.Title = "Actividades";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
    <head>       
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="~/Estilos/bookblock.css" />
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    </head>

@using (Html.BeginForm())
{
    int i = 0;
    @Html.AntiForgeryToken()

    <form id="regForm">
        <!--Libro -->
        <div class="bb-custom-wrapper">
            <!-- Boton Atras -->
            <span id="bb-nav-prev" class="atras">
                <svg viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M5.854 4.646a.5.5 0 0 1 0 .708L3.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z" />
                    <path fill-rule="evenodd" d="M2.5 8a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                </svg>
            </span>
            <!-- Libro Contenido -->
            <div id="bb-bookblock" class="bb-bookblock">
                @{
                    Plataforma_academica.Models.Login usu = Session["usuario"] as Plataforma_academica.Models.Login;
                    Plataforma_academica.Models.principalP actividad1 = Session["usuario3"] as Plataforma_academica.Models.principalP;
                    Plataforma_academica.Models.Actividades actividad = new Plataforma_academica.Models.Actividades();
                    Plataforma_academica.Models.Actividades[] arreglo;
                    Plataforma_academica.Models.Actividades us = new Plataforma_academica.Models.Actividades();
                    int rol = Convert.ToInt32(usu.rol);
                    int seccion_actual = 0;
                    int cant = 0;
                    if (usu != null)
                    {
                        if (rol > 3 && rol < 7)
                        {
                            Plataforma_academica.Models.principalP act1 = Session["usuario3"] as Plataforma_academica.Models.principalP;
                            arreglo = actividad.Consultar_contenido_actividad(act1.codigo_actividad);
                            actividad.actual_seccion = actividad.Buscar_seccion_actual(actividad1.codigo_actividad, usu.usuario);
                            seccion_actual = Convert.ToInt32(actividad.actual_seccion.Rows[0]["seccion_leida"].ToString()) - 1;
                            cant = arreglo.Length;
                            for (i = 0; i < arreglo.Length; i++)
                            {

                                <!-- Tabs-->
                                <div class="bb-item">
                                    @{
                                        //Primera hoja
                                        if (i == 0)
                                        {
                                            <section>
                                                <article>
                                                    @{
                                                        //Contenido Primera Hoja

                                                        <h2>@Html.LabelFor(Model => arreglo[i].Nombre_actividad, arreglo[i].Nombre_actividad, new { @class = "" })</h2>

                                                        if (arreglo[i].id_tipo_multimedia == "3")
                                                        {
                                                            <textarea readonly>@arreglo[i].descripcion</textarea>
                                                        }

                                                        else
                                                        {
                                                            if (arreglo[i].id_tipo_multimedia == "2")
                                                            {
                                                                <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                                <div>
                                                                    <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                if (arreglo[i].descripcion != null)
                                                                {
                                                                    <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                                    <div class="embed-responsive ">
                                                                        <iframe class="embed-responsive-item" src="@arreglo[i].url_multimedia"></iframe>
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="embed-responsive ">
                                                                        <iframe class="embed-responsive-item" src="@arreglo[i].url_multimedia"></iframe>
                                                                    </div>
                                                                }

                                                            }
                                                        }
                                                    }
                                                </article>
                                            </section>
                                            //Boton Material de Apoyo
                                            if (arreglo[i].tipo_seccion == "2")
                                            {
                                                <button type="submit" id="subir" name="subir" value="@arreglo[i].arch" class="btn btn-primary">Material de apoyo</button>
                                            }
                                            else
                                            {
                                                if (arreglo[i].tipo_seccion == "1")
                                                {

                                                }
                                                else
                                                {
                                                    <a href="@arreglo[i].arch" class="btn btn-primary" target="_blank">Material de apoyo</a>
                                                }
                                            }



                                        }
                                        //Segunda en Adelante
                                        else
                                        {
                                            if (arreglo[i].id_tipo_multimedia == "3")
                                            {
                                                <section>
                                                    <article>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@

                                                        <textarea readonly>@arreglo[i].contenido_seccion </textarea>

                                                    </article>
                                                </section>
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "1")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                        <div class="embed-responsive1">
                                                            <iframe width="560" height="315" src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                        </div>
                                                    </section>
                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                            <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <div class="embed-responsive">
                                                            <iframe width="560" height="315" src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                        </div>
                                                    </section>

                                                }
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "2")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4> @*titulo sub*@
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>

                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>

                                                }
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "4")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                        <audio controls>
                                                            <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                        </audio>
                                                    </section>

                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <audio controls>
                                                            <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                        </audio>
                                                    </section>

                                                }
                                            }
                                            if (arreglo[i].id_tipo_multimedia == "5")
                                            {
                                                if (arreglo[i].contenido_seccion == "\r\n")
                                                {
                                                    <section>
                                                        <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>
                                                }
                                                else
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>
                                                    <section>
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                        </div>
                                                    </section>
                                                }

                                            }
                                            if (arreglo[i].tipo_seccion == "2")
                                            {
                                                <button type="submit" id="subir" name="subir" value="@arreglo[i].arch" class="btn btn-primary">Material de apoyo</button>
                                            }
                                            else
                                            {
                                                if (arreglo[i].tipo_seccion == "1")
                                                {

                                                }
                                                else
                                                {
                                                    <a href="@arreglo[i].arch" class="btn btn-primary" target="_blank">Material de apoyo</a>
                                                }
                                            }
                                        }
                                        int m = i + 1;

                                        <div>
                                            <span class="step">@m</span>
                                        </div>
                                    }

                                </div>
                            }

                        }
                        else
                        {
                            if (rol < 4 || rol >= 7)
                            {
                                Plataforma_academica.Models.principalP act2 = Session["usuario10"] as Plataforma_academica.Models.principalP;
                                arreglo = actividad.Consultar_contenido_actividad(act2.codigo_actividad);
                                cant = arreglo.Length;
                                for (i = 0; i < arreglo.Length; i++)
                                {
                                    <!-- Tabs-->
                                    <div class="bb-item">
                                        @{
                                            if (i == 0)
                                            {
                                                <h2>@Html.LabelFor(Model => arreglo[i].Nombre_actividad, arreglo[i].Nombre_actividad, new { @class = "" })</h2>

                                                if (arreglo[i].id_tipo_multimedia == "3")
                                                {
                                                    <section>
                                                        <article>
                                                            <textarea readonly>@arreglo[i].descripcion</textarea>
                                                        </article>
                                                    </section>

                                                    //                                                    <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                }
                                                else
                                                {
                                                    if (arreglo[i].id_tipo_multimedia == "2")
                                                    {
                                                        <section>
                                                            <article>
                                                                <textarea readonly>@arreglo[i].descripcion</textarea>
                                                            </article>
                                                        </section>

                                                        <section>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>

                                                    }
                                                    else
                                                    {
                                                        if (arreglo[i].descripcion != null)
                                                        {
                                                            <p>@Html.LabelFor(Model => arreglo[i].descripcion, arreglo[i].descripcion, new { @class = "form-control", @id = "p" })</p>
                                                            <section>
                                                                <div class="embed-responsive ">
                                                                    <iframe class="embed-responsive-item" src="@arreglo[i].url_multimedia"></iframe>
                                                                </div>
                                                            </section>

                                                        }
                                                        else
                                                        {
                                                            <section>
                                                                <div class="embed-responsive ">
                                                                    <iframe class="embed-responsive-item" src="@arreglo[i].url_multimedia"></iframe>
                                                                </div>
                                                            </section>

                                                        }

                                                    }
                                                }
                                                if (arreglo[i].tipo_seccion == "2")
                                                {
                                                    <button type="submit" id="subir" name="subir" value="@arreglo[i].arch" class="btn btn-primary">Material de apoyo</button>
                                                }
                                                else
                                                {
                                                    if (arreglo[i].tipo_seccion == "1")
                                                    {

                                                    }
                                                    else
                                                    {
                                                        <a href="@arreglo[i].arch" class="btn btn-primary" target="_blank">Material de apoyo</a>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (arreglo[i].id_tipo_multimedia == "3")
                                                {
                                                    <section>
                                                        <article>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                        </article>
                                                    </section>

                                                }
                                                if (arreglo[i].id_tipo_multimedia == "1")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <div class="embed-responsive ">
                                                                <iframe src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                            </div>
                                                        </section>

                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                                <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <div class="embed-responsive ">
                                                                <iframe src="@arreglo[i].url_multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                            </div>
                                                        </section>

                                                    }
                                                }
                                                if (arreglo[i].id_tipo_multimedia == "2")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>

                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                                <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>

                                                    }
                                                }
                                                if (arreglo[i].id_tipo_multimedia == "4")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <audio controls>
                                                                <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                            </audio>
                                                        </section>

                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                                <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <audio controls>
                                                                <source src="~/imagen_multimedia/@arreglo[i].url_multimedia" type="audio/mp3" />
                                                            </audio>
                                                        </section>
                                                    }

                                                }
                                                if (arreglo[i].id_tipo_multimedia == "5")
                                                {
                                                    if (arreglo[i].contenido_seccion == "\r\n")
                                                    {
                                                        <section>
                                                            <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>
                                                    }
                                                    else
                                                    {
                                                        <section>
                                                            <article>
                                                                <h4>@Html.LabelFor(Model => arreglo[i].titulo_seccion, arreglo[i].titulo_seccion, new { @class = "" })</h4>
                                                                <textarea readonly>@arreglo[i].contenido_seccion </textarea>
                                                            </article>
                                                        </section>
                                                        <section>
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].url_multimedia" alt="Nature" disabled="true">
                                                            </div>
                                                        </section>
                                                    }

                                                }
                                                if (arreglo[i].tipo_seccion == "2")
                                                {
                                                    <button type="submit" id="subir" name="subir" value="@arreglo[i].arch" class="btn btn-primary">Material de apoyo</button>
                                                }
                                                else
                                                {
                                                    if (arreglo[i].tipo_seccion == "1")
                                                    {

                                                    }
                                                    else
                                                    {
                                                        <a href="@arreglo[i].arch" class="btn btn-primary" target="_blank">Material de apoyo</a>
                                                    }
                                                }
                                            }
                                            int m = i + 1;
                                            <div>
                                                <span class="step">@m/@cant</span>
                                            </div>
                                            //Metodo para activar nuevas actividades a todos los usuarios que tienen el diplomado registrado
                                            @*if (i == (arreglo.Length - 1) && arreglo[i].edicion_estado == "Pendiente")
                                    {
                                        <div>
                                            <h4>Descripción para editar</h4>
                                            @Html.TextAreaFor(model => model.edicion, new { @class = "form-control" })
                                            <button type="submit" class="btn" name="iraprobado" value="@arreglo[i].id_actividad" onclick="activar()" style="box-shadow: 0 9px #999;border: 1px solid #212529;">Aprobado</button>
                                            <button type="submit" class="btn" name="irdesaprobado" value="@arreglo[i].id_actividad" style="box-shadow: 0 9px #999;border: 1px solid #212529;">Desaprobado</button>
                                        </div>
                                    }*@
                                        }
                                    </div>

                                }
                            }
                            if (ViewBag.mensaje1 == "actualizacion" || ViewBag.mensaje1 == "actualizacion_no_registro")
                            {
                                <script>
                                    $(document).ready(function () {
                                        $("#myModal").modal("hide");
                                    });
                                </script>
                                @Scripts.Render("~/Scripts/actualizar.js")

                            }
                        }
                    }

                }
            </div>
            <!-- Boton Adelante -->
            <span id="bb-nav-next" class="adelante">
                <svg viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10.146 4.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L12.793 8l-2.647-2.646a.5.5 0 0 1 0-.708z" />
                    <path fill-rule="evenodd" d="M2 8a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8z" />
                </svg>
            </span>

            <!-- Modal -->
            <div class="modal fade" id="mostrarmodal1" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog" style="position: initial;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 style="position: absolute;">Verificacion de proceso</h3>
                        </div>
                        <div class="modal-body">
                            <h4>@ViewBag.mensaje</h4>
                        </div>
                        <div class="modal-footer">
                            <a href="/Seleccionar_para_subir_contenido/seleccionar_unidad_para_contenido" class="btn btn-danger">Finalizar verificacion</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 style="position: absolute;">Activar la actividad e informar por correo</h3>
                        </div>
                        <div class="modal-body">
                            <img src="~/Imagenes/giphy.gif" />
                        </div>
                        <div class="modal-footer">
                            <p style="text-align: center;">Este proceso puede tomar algunos minutos, al finalizar sera redirigido</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </form>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jScrollPane/2.2.1/script/jquery.jscrollpane.min.js"></script>
    <script src="~/Scripts/jquery.bookblock.js"></script>
    <script>
        function activar() {
            $(document).ready(function () {
                $("#myModal").modal("show");
            });
        }
    </script>
    <script>
        var Pagina = (function () {

            var $bookBlock = $('#bb-bookblock'),
                $items = $bookBlock.children(),
                itemsCount = $items.length,
                current = 0,
                currentaux = 0
                bb = $bookBlock.bookblock({
                    speed: 800,
                    perspective: 2000,
                    shadowSides: 0.8,
                    shadowFlip: 0.4,
                    onEndFlip: function (old, page, isLimit) {
                        current = page;
                        console.log("Current "  + current)
                        // updateNavigation
                        updateNavigation(isLimit);
                        setJSP('init');
                        AjustarTextArea()
                        // destroy jScrollPane on the content div for the old item
                        setJSP('destroy', old);

                    }
                }),
                $navNext = $('#bb-nav-next'),
                $navPrev = $('#bb-nav-prev').hide(),
                transEndEventNames = {
                    'WebkitTransition': 'webkitTransitionEnd',
                    'MozTransition': 'transitionend',
                    'OTransition': 'oTransitionEnd',
                    'msTransition': 'MSTransitionEnd',
                    'transition': 'transitionend'
                },
                transEndEventName = transEndEventNames[Modernizr.prefixed('transition')],
                supportTransitions = Modernizr.csstransitions;


            function init() {

                if (@rol>= 4 || @rol < 7) {
                    current = @seccion_actual;
                    currentaux =@seccion_actual;
                    // Current tab is set to be the first tab (0)
                } else {
                    current = 0;
                }
                // Display the current tab

                console.log("Funciona")
                // initialize jScrollPane on the content div of the first item
                setJSP('init');
                initEvents();
                bb.jump(current);
            }

            function initEvents() {

                // add navigation events
                $navNext.on('click', function () {

                    bb.next();

                    if (@rol >= 4 || @rol < 7) {
                        console.log("Current " + current);
                        if (current+1 > currentaux) {
                            currentaux = current+1;
                            //&& (itemsCount - 1) > current
                        var url = "@Url.Action("porcentaje","Actividades")";
                        $.post(url).done(function(){

                        }).fail(manejaErrorAjax).always(function(){

                        });
                    }
                    }


                    return false;
                });

                $navPrev.on('click', function () {
                    bb.prev();


                    return false;
                });
                $items.on({
                    'swipeleft': function (event) {
                        if ($container.data('opened')) {
                            return false;
                        }
                        bb.next();
                        return false;
                    },
                    'swiperight': function (event) {
                        if ($container.data('opened')) {
                            return false;
                        }
                        bb.prev();
                        return false;
                    }
                });

                // reinit jScrollPane on window resize
                $(window).on('debouncedresize', function () {
                    // reinitialise jScrollPane on the content div
                    setJSP('reinit');
                });

            }


            function setJSP(action, idx) {

                var idx = idx === undefined ? current : idx,
                    $content = $items.eq(idx).children('div.content'),
                    apiJSP = $content.data('jsp');

                if (action === 'init' && apiJSP === undefined) {
                    $content.jScrollPane({ verticalGutter: 0, hideFocus: true });
                }
                else if (action === 'reinit' && apiJSP !== undefined) {
                    apiJSP.reinitialise();
                }
                else if (action === 'destroy' && apiJSP !== undefined) {
                    apiJSP.destroy();
                }

            }

            function updateNavigation(isLastPage) {

                if (current === 0) {
                    $navNext.show();
                    $navPrev.hide();
                }
                else if (isLastPage) {
                    $navNext.hide();
                    $navPrev.show();
                }
                else {
                    $navNext.show();
                    $navPrev.show();
                }

            }

            return { init: init };

        })();

    </script>

    <script>
        Pagina.init();
    </script>
}


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

}