@model Plataforma_academica.Models.Practicas

@{
    ViewBag.Title = "Practica";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <link href="~/Estilos/practica_textaarea.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/actividadesStyl.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/visualizar_practica.css" rel="stylesheet" type="text/css">
    <link href="~/Estilos/principal.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    @Scripts.Render("~/Scripts/modal_inicial_mensaje.js")
</head>
<main class="con_form">
    <div class="formulario">
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            <!--Modal Informativo-->
            <div class="modal fade" id="mostrarmoda" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog" style="position: initial;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h2 style="position: absolute;">Información</h2>
                        </div>
                        <div class="modal-body">
                            Se le recuerda al estudiante que podra repetir el examen las veces que desee, pero se mantendra la nota del primer intento
                        </div>
                    </div>
                </div>
            </div>



            Plataforma_academica.Models.Login usu = Session["usuario"] as Plataforma_academica.Models.Login;
            Plataforma_academica.Models.Practicas practica = new Plataforma_academica.Models.Practicas();
            Plataforma_academica.Models.Practicas[] arreglo;
            Plataforma_academica.Models.Practicas[] arreglo2;
            Plataforma_academica.Models.Practicas[] arreglo3;
            int rol = Convert.ToInt32(usu.rol);
            if (usu != null)
            {<!--Estudiante-->
                if (rol > 3 && rol < 7)
                {
                    Plataforma_academica.Models.principalP act2 = Session["usuarios2"] as Plataforma_academica.Models.principalP;
                    arreglo3 = practica.Consultar_examen_practica(act2.codigo_examen);
                    <section>
                        <article>
                            <h2>@Html.LabelFor(Model => arreglo3[0].nombre_examen, arreglo3[0].nombre_examen, new { @class = "" })</h2>
                            <p>@Html.LabelFor(Model => arreglo3[0].descripcion_examen, arreglo3[0].descripcion_examen, new { @id = "p" })</p>
                        </article>
                    </section>


                    //descripcion actividad
                    arreglo = practica.Consultar_contenido_practica(act2.codigo_examen);
                    if (arreglo[0].nombre_pregunta == null)
                    {
                    }
                    else
                    {
                        for (int i = 0; i < arreglo.Length; i++)
                        {
                            arreglo2 = practica.Consultar_respuestas_practica(act2.codigo_examen, arreglo[i].id_pregunta);
                            <!--Texto-->
                            if (arreglo[i].id_tipo_multimedia == 3)
                            {
                                <!--Pregunta-->
                                <section class="section_contenido">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class ="textarea", @disabled = "true" })
                                    </article>
                                </section>
                                <!--Respuesta-->
                                <section class="section_contenido">
                                    <article class="respuesta">
                                        @{
                                            for (int j = 0; j < arreglo2.Length; j++)
                                            {
                                                <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                            }
                                        }
                                    </article>
                                </section>
                            }
                            <!--Video-->
                            if (arreglo[i].id_tipo_multimedia == 1)
                            {<!--Pregunta-->
                                <section class="section_contenido">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                    </article>
                                </section>
                                <section style="border: 1px solid white;">
                                    <div class="container mt-4">
                                        <div class="row" style="background-color: #021d3a;box-shadow: 0 1px 0 #cfcfcf00;">
                                            <div class="col-md-12 mb-4">
                                                <div class="card">
                                                    <div class="card-block p-3">
                                                        <div class="embed-responsive embed-responsive-16by9">
                                                            <iframe width="560" height="315" src="@arreglo[i].multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <!--Respuestas-->
                                <section class="section_contenido">
                                    <article class="respuesta">
                                        @{
                                            for (int j = 0; j < arreglo2.Length; j++)
                                            {
                                                <label><input type="radio" name="elegida_@i" id="radio_@j" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                            }
                                        }
                                    </article>
                                </section>
                            }
                            <!--Imagen-->

                            if (arreglo[i].id_tipo_multimedia == 2)
                            {
                                <section class="section_contenido">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                    </article>
                                </section>
                                <section class="section_contenido">
                                    <div class="container mt-4">
                                        <div class="row" style="background-color: #021d3a;box-shadow: 0 1px 0 #cfcfcf00;">
                                            <div class="col-md-12 mb-4">
                                                <div class="card">
                                                    <div class="card-block p-3">
                                                        <div>
                                                            <img src="~/imagen_multimedia/@arreglo[i].multimedia" alt="Nature">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section class="section_contenido">
                                    <article class="respuesta">
                                        @{
                                            for (int j = 0; j < arreglo2.Length; j++)
                                            {
                                                <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                            }
                                        }
                                    </article>
                                </section>
                            }
                            <!--Audio-->
                            if (arreglo[i].id_tipo_multimedia == 4)
                            {<!--Pregunta-->
                                <section class="section_contenido">
                                    <article>
                                        <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                        @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                    </article>
                                </section>
                                <!--Audio-->
                                <section class="section_contenido">
                                    <audio controls>
                                        <source src="~/imagen_multimedia/@arreglo[i].multimedia" type="audio/mp3" />
                                    </audio>
                                </section>
                                <!--Respuesta-->
                                <section class="section_contenido">
                                    <article class="respuesta">
                                        @{
                                            for (int j = 0; j < arreglo2.Length; j++)
                                            {
                                                <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                            }
                                        }
                                    </article>
                                </section>
                            }
                        }
                    }
                    <!--Boton Calificar-->
                    <section class="section_contenido">
                                <article>
                                    <button type="submit" id="subir1" name="calcular" value="@arreglo.Length" class="boton">Calificar</button>
                                </article>
                    </section>
                    <!--Modal-->
                    if (ViewBag.mensaje1 == "Perdio")
                    {
                        @Scripts.Render("~/Scripts/buton_examen.js")
                        @Scripts.Render("~/Scripts/Emergente_nota1.js")

                    }
                    else
                    {
                        if (ViewBag.mensaje1 == "aprobo")
                        {
                            @Scripts.Render("~/Scripts/buton_examen.js")
                            @Scripts.Render("~/Scripts/Emergente_nota1.js")

                        }
                    }
                    <div class="modal fade" id="mostrarmodal4" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                        <div class="modal-dialog" style="position: initial;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h3 style="position: absolute;">Resultado del examen</h3>
                                </div>
                                <div class="modal-body">
                                    <h4>@ViewBag.mensaje2</h4>
                                </div>
                                <div class="modal-footer">
                                    <h4>@ViewBag.mensaje3</h4>
                                    <a href="/PrincipalPlataforma/principalplataforma" class="btn btn-info">Finalizar</a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                else
                { <!--No es estudiante-->
                    if (rol < 4 || rol >= 7)
                    {
                        Plataforma_academica.Models.principalP act2 = Session["usuarios10"] as Plataforma_academica.Models.principalP;
                        arreglo3 = practica.Consultar_examen_practica(act2.codigo_examen);
                        <section>
                            <article>
                                <h2>@Html.LabelFor(Model => arreglo3[0].nombre_examen, arreglo3[0].nombre_examen, new { @class = "" })</h2>
                                <p>@Html.LabelFor(Model => arreglo3[0].descripcion_examen, arreglo3[0].descripcion_examen, new { @id = "p" })</p>
                            </article>
                        </section>

                        //descripcion actividad
                        arreglo = practica.Consultar_contenido_practica(act2.codigo_examen);
                        if (arreglo[0].nombre_pregunta == null)
                        {

                        }
                        else
                        {
                            for (int i = 0; i < arreglo.Length; i++)
                            {
                                arreglo2 = practica.Consultar_respuestas_practica(act2.codigo_examen, arreglo[i].id_pregunta);
                                <!--Texto-->
                                if (arreglo[i].id_tipo_multimedia == 3)
                                {<!--Pregunta-->
                                    <section class="section_contenido">
                                        <article>
                                            <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                            @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                        </article>
                                    </section>
                                    <!--Respuesta-->
                                    <section class="section_contenido">
                                        <article>
                                            @{
                                                for (int j = 0; j < arreglo2.Length; j++)
                                                {
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                }
                                            }
                                        </article>
                                    </section>
                                }
                                <!--Video-->
                                if (arreglo[i].id_tipo_multimedia == 1)
                                {
                                    <section class="section_contenido">
                                        <article>
                                            <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                            @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                        </article>
                                    </section>
                                    <section class="section_contenido">
                                        <div class="container mt-4">
                                            <div class="row" style="background-color: #021d3a;box-shadow: 0 1px 0 #cfcfcf00;">
                                                <div class="col-md-12 mb-4">
                                                    <div class="card">
                                                        <div class="card-block p-3">
                                                            <div class="embed-responsive embed-responsive-16by9">
                                                                <iframe width="560" height="315" src="@arreglo[i].multimedia" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <section class="section_contenido">
                                        <article>
                                            @{
                                                for (int j = 0; j < arreglo2.Length; j++)
                                                {
                                                    <label><input type="radio" name="elegida_@i" id="radio_@j" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                }
                                            }
                                        </article>
                                    </section>
                                }
                                <!--Imagen-->
                                if (arreglo[i].id_tipo_multimedia == 2)
                                {
                                    <section class="section_contenido">
                                        <article>
                                            <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                            @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                        </article>
                                    </section>
                                    <section class="section_contenido">
                                        <div class="container mt-4">
                                            <div class="row" style="background-color: #021d3a;box-shadow: 0 1px 0 #cfcfcf00;">
                                                <div class="col-md-12 mb-4">
                                                    <div class="card">
                                                        <div class="card-block p-3">
                                                            <div>
                                                                <img src="~/imagen_multimedia/@arreglo[i].multimedia" alt="Nature">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <section class="section_contenido">
                                        <article>
                                            @{
                                                for (int j = 0; j < arreglo2.Length; j++)
                                                {
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                }
                                            }
                                        </article>
                                    </section>
                                }
                                <!-- Audio-->
                                if (arreglo[i].id_tipo_multimedia == 4)
                                {
                                    <section class="section_contenido">
                                        <article>
                                            <h4>@Html.LabelFor(Model => arreglo[i].nombre_pregunta, arreglo[i].nombre_pregunta, new { @class = "" })</h4> @*titulo sub*@
                                            @Html.TextArea(arreglo[i].contenido_pregunta, arreglo[i].contenido_pregunta, new { @class = "textarea", @disabled = "true" })
                                        </article>
                                    </section>
                                    <section class="section_contenido">
                                        <audio controls>
                                            <source src="~/imagen_multimedia/@arreglo[i].multimedia" type="audio/mp3" />
                                        </audio>
                                    </section>
                                    <section class="section_contenido">
                                        <article>
                                            @{
                                                for (int j = 0; j < arreglo2.Length; j++)
                                                {
                                                    <label><input type="radio" name="elegida_@i" value="@arreglo2[j].nombre_condicion">@arreglo2[j].contenido_respuesta</label>
                                                }
                                            }
                                        </article>
                                    </section>
                                }
                            }
                        }
                        <section>
                            <div class="card">
                                <div class="card-block p-3">
                                    <article>
                                        <button type="submit" id="subir1" name="calcular" value="@arreglo.Length" class="btn btn-primary">Calificar</button>
                                    </article>
                                </div>
                            </div>
                        </section>
                    }

                    <!--Modal Si gano o perdio-->
                    if (ViewBag.mensaje1 == "Perdio")
                    {
                        @Scripts.Render("~/Scripts/buton_examen.js")
                        @Scripts.Render("~/Scripts/Emergente_nota.js")

                    }
                    else
                    {
                        if (ViewBag.mensaje1 == "aprobo")
                        {
                            @Scripts.Render("~/Scripts/buton_examen.js")
                            @Scripts.Render("~/Scripts/Emergente_nota.js")

                        }
                    }
                    <div class="modal fade" id="mostrarmodal3" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                        <div class="modal-dialog" style="position: initial;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h3 style="position: absolute;">Resultado del examen</h3>
                                </div>
                                <div class="modal-body">
                                    <h4>@ViewBag.mensaje2</h4>
                                </div>
                                <div class="modal-footer">
                                    <h4>@ViewBag.mensaje3</h4>
                                    <a href="/Seleccionar_para_subir_contenido/seleccionar_unidad_para_contenido" class="btn btn-info">Finalizar</a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }



        }






    </div>

</main>



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
