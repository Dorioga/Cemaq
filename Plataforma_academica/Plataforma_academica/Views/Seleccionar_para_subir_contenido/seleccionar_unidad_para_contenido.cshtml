@model Plataforma_academica.Models.principalP

@{
    ViewBag.Title = "seleccionar_unidad_para_contenido";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Plataforma_academica.Models.Login usu = Session["usuario"] as Plataforma_academica.Models.Login;
}
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
        @section scripts{
            <script src="/Scripts/ui/jquery.ui.core.js"></script>
            <script src="/Scripts/ui/jquery.ui.widget.js"></script>
            <script src="/Scripts/ui/jquery.ui.draggable.js"></script>
            <script src="/Scripts/ui/jquery.ui.resizable.js"></script>

            <!--Reference the SignalR library. -->
            <script src="~/Scripts/jquery.signalR-2.4.1.js"></script>

            <!--Reference the autogenerated SignalR hub script. -->
            <script src="/signalr/hubs"></script>
        }

    </head>



@using (Html.BeginForm("seleccionar_unidad_para_contenido","Seleccionar_para_subir_contenido", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    Plataforma_academica.Models.principalP principal = new Plataforma_academica.Models.principalP();
    Plataforma_academica.Models.Niveles nivel = new Plataforma_academica.Models.Niveles();
    Plataforma_academica.Models.Unidades unidad = new Plataforma_academica.Models.Unidades();
    Plataforma_academica.Models.Actividades_unidad actividad = new Plataforma_academica.Models.Actividades_unidad();
    Plataforma_academica.Models.Actividades_unidad[] arreglo_actividad = new Plataforma_academica.Models.Actividades_unidad[0];
    Plataforma_academica.Models.Actividades_unidad[] arreglo_examen = new Plataforma_academica.Models.Actividades_unidad[0];
    Plataforma_academica.Models.Pais pai = new Plataforma_academica.Models.Pais();
    Plataforma_academica.Models.Departamento dep = new Plataforma_academica.Models.Departamento();
    Plataforma_academica.Models.Municipio mun = new Plataforma_academica.Models.Municipio();
    Plataforma_academica.Models.Empresa emp = new Plataforma_academica.Models.Empresa();
    Plataforma_academica.Models.Grupo grup = new Plataforma_academica.Models.Grupo();
    Plataforma_academica.Models.Alumnos alum = new Plataforma_academica.Models.Alumnos();
    Plataforma_academica.Models.Chat cha = new Plataforma_academica.Models.Chat();
    string url = "";


    <main class="con_form">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })      
        <!--Actividades-->
        @{
            if (TempData["mensaje12"] != null && usu != null)
            {
                <div class="contener" id="actividad">
                    @{
                        TempData.Keep("mensaje12");
                        string nc1 = Convert.ToString(TempData["mensaje12"]);
                        arreglo_actividad = actividad.Consultar_Actividad_unidades_edic(nc1);
                        arreglo_examen = actividad.Consultar_examen_unidades_edic(nc1);
                        if (Convert.ToInt32(usu.rol) != 7)
                        {
                            <button type="button" class="boton" data-toggle="modal" data-target="#guia" name="guia">
                                <div class="content-btn">
                                    <section class="cent">
                                        <p>Cargar Guía</p>
                                    </section>
                                </div>
                            </button>
                            <button type="submit" class="boton" name="ir5" value="nueva">
                                <div class="content-btn">
                                    <section class="cent">
                                        <p>Crear Actividad</p>
                                    </section>
                                </div>
                            </button>
                            <button type="submit" class="boton" name="ir99" value="nueva2">
                                <div class="content-btn">
                                    <section class="cent">
                                        <p>Crear Examen</p>
                                    </section>

                                </div>
                            </button>
                        }
                        for (int i = 0; i < arreglo_actividad.Length; i++)
                        {
                            if (i == 0)
                            {
                                url = arreglo_actividad[i].url_guia;
                                if (arreglo_actividad[i].url_guia != "pendiente")
                                {
                                    <button class="boton" data-toggle="modal" data-target="#guia_ver">
                                        <div class="content-btn">
                                            <section class="cent"><p>Guía de Aprendizaje</p></section>
                                        </div>
                                    </button>
                                }
                            }
                            <button type="submit" class="boton" name="ir4" value="@arreglo_actividad[i].codigo_actividad">
                                <div class="content-btn">
                                    <section class="cent"><p>@arreglo_actividad[i].nombre_actividad "@arreglo_actividad[i].edicion"</p></section>
                                </div>
                            </button>
                            if (arreglo_actividad[i].edicion == "Desaprobado")
                            {
                                <button type="submit" class="boton btn-editar" name="ir6" value="@arreglo_actividad[i].codigo_actividad">
                                    <div class="content-btn">
                                        <section class="cent">
                                            <p class="glyphicon glyphicon-hand-left">Editar</p>
                                        </section>

                                    </div>
                                </button>
                            }
                        }
                        for (int i = 0; i < arreglo_examen.Length; i++)
                        {
                            <button type="submit" class="boton" name="ir4_" value="@arreglo_examen[i].id_examen">
                                <div class="content-btn">

                                    <section class="cent">
                                        <p>@arreglo_examen[i].examen "@arreglo_examen[i].edicion_examen"</p>
                                    </section>


                                </div>
                            </button>

                            if (arreglo_examen[i].edicion_examen == "Desaprobado")
                            {
                                <button type="submit" class="boton" name="ir6_" value="@arreglo_examen[i].id_examen">
                                    <div class="content-btn">
                                        <section class="cent"><span class="glyphicon glyphicon-hand-left">Editar</span></section>
                                    </div>
                                </button>
                            }
                        }

                        <script>
                            var checkBox = document.getElementById("actividad");
                            checkBox.checked = "checked"
                        </script>

                    }
                </div>
                <div class="modal fade" id="guia_ver" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content" style="width: 50vw;">
                            <div class="modal-body">
                                <embed src="~/Imagenes/@url" style='width:100%; min-height:700px;' frameborder='0'></embed>
                            </div>
                            <div class="modal-footer">
                                <a href="" data-dismiss="modal" class="btn btn-danger">Cerrar</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="guia" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">

                                <h3>Agregar Guía</h3>
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            </div>
                            <div class="modal-body">
                                <section class="carga">
                                    <span id="estado"></span>
                                    <input class="filechooser" type="file" id="archivo" name="file" accept=".pdf" style="font-size: 12px;" />
                                    <button class="btn btn-primary btn-xs" type="submit" id="seccion" name="seccion" value="@nc1" style="font-size: 16px;">Guardar</button>/>
                                </section>
                            </div>
                            <div class="modal-footer">
                                <a href="" data-dismiss="modal" class="btn btn-danger">Cerrar</a>
                            </div>
                        </div>
                    </div>
                </div>
                        }
        }        
    </main>

}<script src="~/Scripts/Manejocurso.js" charset="utf-8"></script>
 <footer>
     <p> @DateTime.Now.Year - CEMAQ - Diplomados</p>
 </footer>